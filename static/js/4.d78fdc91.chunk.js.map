{"version":3,"sources":["data/logo.png","Map/Map.tsx","WorkingBikes/WorkingBikes.tsx"],"names":["module","exports","config","streets","chrome","satellite","Map","props","useMapState","mapRef","viewState","setViewState","mapStyle","height","mapboxApiAccessToken","ref","width","controller","initialViewState","layers","onViewStateChange","e","children","NavContainer","longitude","latitude","zoom","rest","showCompass","styled","div","chicago","MapContainer","WorkingBikesLegend","Container","WorkingBikes","Error","React","useEffect","COLOR_RANGE","className","GeoJsonLayer","id","data","donationTotals","opacity","stroked","filled","extruded","intensity","threshold","radiusPixels","getFillColor","f","total","getColor","properties","visible","getLineColor","getLineWidth","highlightColor","lineWidthMinPixels","lineWidthScale","src","logo","alt","filter","a","map","donation","cent","center","geometry","dynamicPosition","closeButton","coordinates","zip"],"mappings":"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","file":"static/js/4.d78fdc91.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.77b83b6a.png\";","import 'mapbox-gl/dist/mapbox-gl.css';\nimport { NavigationControl, StaticMap, ViewState } from 'react-map-gl';\nimport { useMapState } from 'Map/MapProvider';\nimport Deck from 'deck.gl';\nimport React from 'react';\nimport styled from 'styled-components';\n\ntype Props = {\n\tchildren?: React.ReactNode;\n\tlayers?: any[];\n\tmapStyle?: string;\n};\n\nconst config = {\n\tstyles: {\n\t\tstreets: 'athomann/ck5g2v6c1088v1ipthfqqofpn',\n\t\tchrome: 'athomann/ck5zz6hve2dmp1imrdwv27qpi',\n\t\tsatellite: 'mapbox/satellite-streets-v10',\n\t},\n\taccessToken:\n\t\t'pk.eyJ1IjoiYXRob21hbm4iLCJhIjoiY2p0aGo1a2VtMmV5cTQzcDdnOGZ0bWJuMyJ9.TEE_Hc2FNPkfOjfa2H69bA',\n};\n\nconst Map: React.FC<Props> = (props: Props) => {\n\tconst { mapRef, viewState, setViewState } = useMapState();\n\tconst mapStyle = `mapbox://styles/${props.mapStyle || config.styles.streets}`;\n\n\treturn (\n\t\t<StaticMap\n\t\t\t{...viewState}\n\t\t\theight=\"100%\"\n\t\t\tmapboxApiAccessToken={config.accessToken}\n\t\t\tmapStyle={mapStyle}\n\t\t\tref={mapRef}\n\t\t\twidth=\"100%\"\n\t\t>\n\t\t\t<Deck\n\t\t\t\tcontroller={true}\n\t\t\t\theight={'100%'}\n\t\t\t\tinitialViewState={viewState}\n\t\t\t\tlayers={props.layers}\n\t\t\t\twidth={'100%'}\n\t\t\t\tviewState={viewState}\n\t\t\t\tonViewStateChange={(e: { viewState: ViewState }) => {\n\t\t\t\t\tsetViewState && setViewState(e.viewState);\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t{props.children}\n\n\t\t\t<NavContainer>\n\t\t\t\t<NavigationControl\n\t\t\t\t\tonViewStateChange={({\n\t\t\t\t\t\tviewState: { longitude, latitude, zoom, ...rest },\n\t\t\t\t\t}) => {\n\t\t\t\t\t\tsetViewState &&\n\t\t\t\t\t\t\tsetViewState({ latitude, longitude, zoom, ...rest });\n\t\t\t\t\t}}\n\t\t\t\t\tshowCompass={false}\n\t\t\t\t/>\n\t\t\t</NavContainer>\n\t\t</StaticMap>\n\t);\n};\n\nexport default Map;\n\nconst NavContainer = styled.div`\n\twidth: 30px;\n\tposition: absolute;\n\tright: 1rem;\n\ttop: 1rem;\n\tz-index: 10;\n`;\n","import { GeoJsonLayer } from 'deck.gl';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { useMapState } from 'Map/MapProvider';\nimport logo from 'data/logo.png';\nimport Map from 'Map/Map';\nimport React from 'react';\nimport styled from 'styled-components';\nimport donations from './chicago_donations.json';\nimport donationTotals from './donationTotals.json';\nimport { center } from '@turf/turf';\n\nimport { Popup } from 'react-map-gl';\n\nconst chicago = {\n\tname: 'Chicago',\n\tlongitude: -87.623177,\n\tlatitude: 41.881832,\n\tzoom: 11,\n};\n\nconst WorkingBikes = (\n\tprops: RouteComponentProps<{ city: string; layerType?: string }>\n) => {\n\tconst { setViewState } = useMapState();\n\tif (setViewState == null) {\n\t\tthrow Error('Testl');\n\t}\n\n\tReact.useEffect(() => {\n\t\tsetViewState({\n\t\t\tlatitude: chicago.latitude,\n\t\t\tlongitude: chicago.longitude,\n\t\t\tzoom: 9.7,\n\t\t});\n\t}, []);\n\n\tconst COLOR_RANGE = [\n\t\t[237, 250, 234, 200],\n\t\t[199, 234, 191, 200],\n\t\t[163, 216, 154, 200],\n\t\t[66, 171, 94, 200],\n\t\t[35, 139, 71, 200],\n\t];\n\n\tconst getColor = (total: number) => {\n\t\tswitch (true) {\n\t\t\tcase total == null:\n\t\t\tcase total === 0:\n\t\t\t\treturn COLOR_RANGE[0];\n\t\t\tcase total < 5:\n\t\t\t\treturn COLOR_RANGE[1];\n\t\t\tcase total < 10:\n\t\t\t\treturn COLOR_RANGE[2];\n\t\t\tcase total < 29:\n\t\t\t\treturn COLOR_RANGE[3];\n\t\t\tcase total < 120:\n\t\t\t\treturn COLOR_RANGE[4];\n\t\t\tdefault:\n\t\t\t\treturn COLOR_RANGE[0];\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<MapContainer>\n\t\t\t\t<Map\n\t\t\t\t\tmapStyle=\"athomann/ck5zz6hve2dmp1imrdwv27qpi\"\n\t\t\t\t\tlayers={[\n\t\t\t\t\t\tnew GeoJsonLayer({\n\t\t\t\t\t\t\tid: 'boundaries-layer',\n\t\t\t\t\t\t\tdata: donationTotals,\n\t\t\t\t\t\t\topacity: 1,\n\t\t\t\t\t\t\tstroked: true,\n\t\t\t\t\t\t\tfilled: true,\n\t\t\t\t\t\t\textruded: false,\n\t\t\t\t\t\t\tintensity: 1,\n\t\t\t\t\t\t\tthreshold: 0.3,\n\t\t\t\t\t\t\tradiusPixels: 30,\n\t\t\t\t\t\t\tgetFillColor: (f: any) => {\n\t\t\t\t\t\t\t\treturn getColor(f.properties.total);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tvisible: true,\n\t\t\t\t\t\t\tgetLineColor: [100, 100, 100, 100],\n\t\t\t\t\t\t\tgetLineWidth: 10,\n\t\t\t\t\t\t\thighlightColor: [50, 100, 200, 100],\n\t\t\t\t\t\t\tlineWidthMinPixels: 1,\n\t\t\t\t\t\t\tlineWidthScale: 2,\n\t\t\t\t\t\t}),\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t<header className=\"App-header\">\n\t\t\t\t\t\t<img src={logo} alt=\"Bike Lane Uprising\" />\n\t\t\t\t\t</header>\n\t\t\t\t\t{donationTotals\n\t\t\t\t\t\t.filter(a => a.properties.total != null)\n\t\t\t\t\t\t.map((donation: any) => {\n\t\t\t\t\t\t\tconst cent = center(donation);\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\tcent?.geometry != null && (\n\t\t\t\t\t\t\t\t\t<Popup\n\t\t\t\t\t\t\t\t\t\tdynamicPosition\n\t\t\t\t\t\t\t\t\t\tcloseButton={false}\n\t\t\t\t\t\t\t\t\t\tlatitude={cent.geometry.coordinates[1]}\n\t\t\t\t\t\t\t\t\t\tlongitude={cent.geometry.coordinates[0]}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Container>\n\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t{donation.properties.zip} Total:{' '}\n\t\t\t\t\t\t\t\t\t\t\t\t{donation.properties.total}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t\t\t</Popup>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\n\t\t\t\t\t<WorkingBikesLegend />\n\t\t\t\t</Map>\n\t\t\t</MapContainer>\n\t\t</div>\n\t);\n};\n\nconst MapContainer = styled.div`\n\tposition: relative;\n\theight: 100vh;\n\twidth: 100%;\n\n\t.mapboxgl-popup {\n\t\tz-index: 10;\n\t}\n`;\n\nconst WorkingBikesLegend = () => <span />;\n\nconst Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tfont-size: 0.75rem;\n\n\th3 {\n\t\tmargin: 0 0 0.4rem;\n\t}\n\n\th4 {\n\t\tpadding: 0;\n\t\tmargin: 0;\n\t}\n\n\tspan {\n\t\tmargin: 0 0 0.2rem;\n\t}\n`;\n\nexport default WorkingBikes;\n"],"sourceRoot":""}